(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"/B1c":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={props:{item:{type:Object,default:{}}},name:"icon-vue"}},"1ugt":function(t,i,e){"use strict";e.r(i);var n=e("/B1c"),o=e.n(n);for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);i.default=o.a},OH6I:function(t,i,e){"use strict";var n=function(){var t=this.$createElement,i=this._self._c||t;return i("em",{staticClass:"tip-red"},[i("i",{directives:[{name:"show",rawName:"v-show",value:this.item.currentIds[3],expression:"item.currentIds['3']"}],staticClass:"iconfont icon-limitedoff-new"}),this._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:this.item.currentIds[8],expression:"item.currentIds['8']"}],staticClass:"iconfont icon-apponly-new"}),this._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:this.item.currentIds[10],expression:"item.currentIds['10']"}],staticClass:"flash-sale-icon iconfont icon-flashsale-new"})])},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},RneQ:function(t,i,e){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(e("bTtU"));var o=gbCommonInfo,r=o.lang,a=o.host,s=o.language,u=o.SiteUID;window.cart_module={cartFn:[],cartPromise:null,cartCheck:function(t){var i=this;null==this.cartPromise&&(this.cartPromise=$.get("/cart/checkcart",function(e){for(var n in 0==e.code&&(i.cartVue.res=e,e.info&&e.info.carts&&e.info.carts.length&&i.cartVue.checkStock()),cart_module.cartFn)cart_module.cartFn[n](e);t&&t(e.info)},"json"))},initialize:function(){this.eventCenter=new Vue,this.initVue(),this.cartCheck()},initVue:function(){var t=this;this.cartVue=new Vue({el:".j-fast-cart",data:{res:{},carts:[],show:!1,loading:!1,summary:{},buy_gifts_num:0,buy_gifts_choose:0,buy_gifts_tip:"",soldOut:[],isLogin:!!SHEIN_W.getCookie("userinfo_email"),gift_empty:!0,buyGift:!1,tips:{show:!1,text:""},limitBuy:0,loginJump:a+"/user/auth/login?redirection="+encodeURIComponent(location.pathname),rangeList:{}},watch:{res:function(){var t=this,i=this.res;this.getFreeShippingTip(i.info.info?i.info.info.totalPrice.amount:i.info.totalPrice.amount).then(function(i){i?(i.price.amount?t.summary.title=i.tips.replace("[money]",i.price.amountWithSymbol):t.summary.title=i.tips,t.summary.show=!!t.summary.title):(t.summary.title="",t.summary.show=!1)}),Vue.set(this,"carts",i.info.carts||i.info.info.carts),Vue.set(this,"summary",{title:"",show:"",originPrice:i.info.originPrice||i.info.info.originPrice,totalPrice:i.info.totalPrice||i.info.info.totalPrice,cartNum:i.info.totalPrice?i.info.cartSumQuantity:i.info.info.cartSumQuantity}),this.buy_gifts_num=0,this.buy_gifts_choose=0,$.each(this.carts,function(i,e){$.each(e.product.promotionInfo,function(i,n){2==n.typeId&&(t.buy_gifts_num+=parseInt(e.quantity),1==n.isPresent&&(t.buy_gifts_choose=1))})}),this.buy_gifts_tip="ar"==r?SHEIN_W.template(this.buy_gifts_num,s.cart_buy_tip_2):SHEIN_W.template(this.buy_gifts_num,s.cart_buy_tip_1);var e=!1;i.info.promotionNew?e=i.info.promotionNew:i.info.info&&i.info.info.promotionNew&&(e=i.info.info.promotionNew),e&&e.fullGifts&&$.each(e.fullGifts,function(i,e){e.promotionGoods.length&&(t.gift_empty=!1)}),this.buyGift=e&&e.buyGifts&&e.buyGifts.length&&1!=this.buy_gifts_choose,this.initCart()}},methods:{htmlDecode:SHEIN_W.htmlDecode,getFreeShippingTip:function(t,i){return new Promise(function(e,n){$.get("/cart/getFreeShipping",{amount:t,country_id:i},function(t){0==t.code&&t.info&&e(t.info)})})},shipTitle:function(t){var i=parseInt(t.usd.amount),e=t.price.amountWithSymbol,n="",o=!0;return"stand_shipping"==t.id?i>20?o=!1:n=SHEIN_W.template(e,s.cart_ship_stand):"express_shipping"==t.id?i>30?(n=s.cart_ship_stand_over,"us"==r&&(n=SHEIN_W.template(e,s.cart_ship_express)),1==t.info.length&&(o=!1)):i>0&&i<=30&&(n=SHEIN_W.template(e,s.cart_ship_express)):n=1==t.info.length&&"stand_shipping"==t.info[0].id?s.cart_ship_stand_over:s.cart_ship_express_over,{show:o,title:n=SHEIN_W.htmlDecode(n)}},initCart:function(){var t=0;$.each(this.carts,function(i,e){!e.relatedProductIds&&0==e.product.stock&&+e.realTimeInventory<+e.quantity||!e.relatedProductIds&&0==e.product.is_on_sale||!e.relatedProductIds&&e.attrs;t+=parseInt(e.quantity)}),this.summary.cartNum=t},handleQuantity:function(i,e,n){var o=this;if(!e&&i.quantity<=1)return i.quantity=1,!1;if(this.loading)return!1;var r=parseInt(i.quantity);if(n)i.quantity=Math.abs(parseInt($(n.target).val()));else{if(i.quantity>=99&&e)return!1;e?i.quantity++:i.quantity--}if(i.quantity>i.realTimeInventory&&i.realTimeInventory>0&&(i.realTimeInventory>99?i.quantity=99:i.quantity=i.realTimeInventory),!i.quantity)return this.showTip(SHEIN_W.htmlDecode(s.lang_cart_enter_amount)),i.quantity=r,!1;if(i.quantity==r)return i.quantity=r,!1;if(i.quantity>999)return this.showTip(s.lang_cart_maxium_num+"999"),i.quantity=r,!1;this.loading=!0;var a=gbExposeTraceid("getProduct",{goods_id:i.product&&i.product.goods_id||""}),u={id:i.id,quantity:i.quantity};a?u.trace_id=a:i.trace_id&&(u.trace_id=i.trace_id),$.post("/cart/update",u,function(e){o.loading=!1,0==e.code?Vue.set(o,"res",e):300402==e.code?(i.quantity=r,o.showTip(s.lang_member_out_of_stock)):["200401","500301"].indexOf(e.code)>=0?(i.quantity=r,o.showTip(s.lang_goods_only_one)):500302==e.code?(i.quantity=r,o.showTip(o.template(e.info.limitCount,s.goods_limit_buy))):500303==e.code?(i.quantity=r,o.showTip(s.SHEIN_PC_KEY_3274)):300405==e.code?(i.quantity=r,o.showTip(o.template(i.product.limit_count,s.goods_limit_buy))):(i.quantity=r,o.showTip(s.category_error)),t.analysis.handleQuantity(i,r)},"json")},showTip:function(t){this.tips.show=!0,this.tips.text=t},del:function(t){var i=this;if(this.loading)return!1;this.loading=!0,$.post("/cart/delete",{id:t.id},function(t){i.loading=!1,0==t.code&&Vue.set(i,"res",t)},"json")},isPromotionVal:function(t,i){return t.product.promotionInfo&&t.product.promotionInfo.length&&t.product.promotionInfo.some(function(t){return t.typeId==i})},getPromotionVal:function(t,i){var e=t.product.promotionInfo&&t.product.promotionInfo.length&&t.product.promotionInfo.filter(function(t){return t.typeId==i})||[];return e.length?e[0]:{}},checkStock:function(){var t=this;$.get("/cart/checkStock",function(i){if(0==i.code){var e=[];$.each(i.info.outStockCarts,function(t,i){e.push(i.id)}),Vue.set(t,"soldOut",e)}},"json").fail(function(t){})},hover:function(t){this.$refs.addBuys&&this.$refs.addBuys.is_show||(this.show=t)},updateCom:function(t){t&&t.rangeList&&(this.rangeList=t.rangeList)},promotionCutPriceShow:function(t){if(t&&t.reduce_price)return Object.keys(t.reduce_price).length>0&&t.reduce_price.siteFrom==u&&t.reduce_price.reduceAmount.amount>0},percentNum:percentNum,transformImg:transformImg,getGoodsUrl:SHEIN_W.getGoodsUrl,template:SHEIN_W.template},mounted:function(){},components:{"icon-vue":n.default}})},recart:function(t){var i=this;0==t.code&&(this.reCheckStock(t)||Vue.set(this.cartVue,"res",t),this.cartVue.hover(!0),setTimeout(function(){i.cartVue.hover(!1)},3e3))},reCheckStock:function(t){var i=this,e=!1;return $.each(t.info.carts,function(t,n){1*n.quantity>1&&1*n.quantity>n.realTimeInventory&&(i.cartVue.handleQuantity(n),n.quantity=n.realTimeInventory,e=!0)}),e},reload:function(t){var i=this;$.get("/cart/checkcart",function(e){0==e.code&&(Vue.set(i.cartVue,"res",e),1==t&&(i.cartVue.hover(!0),setTimeout(function(){i.cartVue.hover(!1)},3e3)))},"json")},recordView:function(t){var i=getCookie("view_history")?getCookie("view_history").split(","):[];if(i.indexOf(t)>-1){var e=i.indexOf(t);i.splice(e,1)}i.unshift(t),i.length>24&&(i.length=24),SHEIN_W.setCookie("view_history",i.join(","),2592e3)},analysis:{ecAction:function(t,i){var e=t.product.goods_sn,n={id:t.product.productRelationID||e,name:e,quantity:t.quantity,category:t.product.cat_id,price:GB_ga_transformPrice(t.product.salePrice.amount)};ga("shein.ec:addProduct",n),ga("shein.ec:setAction",i),GBGaSend({category:"快捷购物车",action:"add"==i?"QtyAdd":"QtyLess",label:e})},handleQuantity:function(t,i){i=Number(i);var e,n={};$.extend(!0,n,t),n.quantity>i?e="add":n.quantity<i&&(e="remove"),n.quantity=Math.abs(n.quantity-i),this.ecAction(n,e)}}},$(function(){cart_module.initialize()})},bTtU:function(t,i,e){"use strict";e.r(i);var n=e("OH6I"),o=e("1ugt");for(var r in o)"default"!==r&&function(t){e.d(i,t,function(){return o[t]})}(r);var a=e("KHd+"),s=Object(a.a)(o.default,n.a,n.b,!1,null,null,null);i.default=s.exports}}]);
//# sourceMappingURL=cart-module.9ef4d0.js.map