(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{"2Y9K":function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={register:function(e,i){var t="";i&&(t=e?"":i),ga("shein.send",{hitType:"event",eventAction:"ClickPopUpsRegister",eventCategory:"注册弹窗",eventLabel:(e?"Success":"Fail-")+t,eventValue:e,transport:"beacon"})},autoPopUps:function(){GBGaSend({category:"注册弹窗",action:"AutoPopUps"})},clickPopUps:function(){GBGaSend({category:"注册弹窗",action:"ClickPopUps"})},closePopUps:function(){GBGaSend({category:"注册弹窗",action:"CloseAutoPopUps"})},editEmail:function(){GBGaSend({category:"注册弹窗",action:"EditEmail"})},boolPrivacy:function(){GBGaSend({category:"注册弹窗",action:"ClickPopUpsRegister",label:"Fail-Please agree to our Privacy Policy",value:0})}};i.default=r},"8IYF":function(e,i,t){"use strict";t.r(i);var r=t("LfmF"),o=t("J2uh");for(var n in o)"default"!==n&&function(e){t.d(i,e,function(){return o[e]})}(n);var s=t("KHd+"),c=Object(s.a)(o.default,r.a,r.b,!1,null,null,null);i.default=c.exports},AYMa:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(t("2Y9K"));i.default={ga:r.default}},J2uh:function(e,i,t){"use strict";t.r(i);var r=t("dWkv"),o=t.n(r);for(var n in r)"default"!==n&&function(e){t.d(i,e,function(){return r[e]})}(n);i.default=o.a},LfmF:function(e,i,t){"use strict";var r=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showQuick,expression:"showQuick"}],staticClass:"c-quick-register j-quick-register",class:{"c-quick-register-hide":!e.quickShow}},[t("input",{staticStyle:{width:"0",height:"0",border:"0",position:"absolute",opacity:"0"},attrs:{type:"text",placeholder:"勿删"}}),e._v(" "),t("div",{staticClass:"quickg-outside",style:e.quickShow?e.defoutStyle:e.changeoutStyle,on:{click:e.openQuickReg}},[t("i",{staticClass:"iconfont icon-arrow-left"}),e._v(" "),e.firstCouponSite.registerImgConf?t("div",{staticClass:"outside-txt"},[e._v(e._s(e.firstCouponSite.registerImgConf.left_copy))]):e._e()]),e._v(" "),t("div",{staticClass:"quickg-inside",class:{"quickg-inside-suc":e.state.quickShowReg}},[e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.register_success_img?[t("img",{staticStyle:{display:"none"},attrs:{src:e.transformImg(e.firstCouponSite.registerImgConf.register_success_img)}})]:e._e(),e._v(" "),e.state.quickShowReg?e._e():t("div",{staticClass:"inside-ing"},[t("div",{staticClass:"inside-btm"},[e.firstCouponSite.registerImgConf&&"0"!=e.firstCouponSite.registerImgConf.is_show_perfer&&e.firstCouponSite.registerImgConf.prefer_option?t("div",{staticClass:"quick-reg-prefer-ctn"},[e._v("\n                    "+e._s(e.firstCouponSite.registerImgConf.title)+"\n                    "),t("div",{staticClass:"quick-reg-refer-input"},e._l(e.firstCouponSite.registerImgConf.prefer_option,function(i,r){return t("div",{key:r,staticClass:"prefer-item"},[t("label",{staticClass:"she-checkbox"},[t("input",{attrs:{type:"checkbox",name:i},domProps:{value:i}}),e._v(" "),t("i")]),e._v(" "+e._s(e.firstCouponSite.registerImgConf.prefer_option[r])+"\n                        ")])}))]):e._e(),e._v(" "),t("div",{staticClass:"inside-input she-clearfix"},[t("div",{staticClass:"email-input"},[t("div",{staticClass:"c-input"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.emailtxt,expression:"emailtxt",modifiers:{trim:!0}}],staticClass:"input-error",attrs:{placeholder:e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.input_copy,type:"email",name:"email",autocomplete:"off"},domProps:{value:e.emailtxt},on:{click:e.editInputEmail,blur:[e.blurTips,function(i){e.$forceUpdate()}],input:function(i){i.target.composing||(e.emailtxt=i.target.value.trim())}}}),e._v(" "),e.SITE_GDPR.includes(e.lang)?[e.isKeepPrivacy?t("div",{staticClass:"c-privacy-check j-common-privacy-con j-privacy-check-quickregister"},[t("div",{staticClass:"privacy-item grey"},[e._m(0),e._v(" "),t("div",{domProps:{innerHTML:e._s(e.language.lang_privacy_tip)}})])]):e._e()]:e._e(),e._v(" "),t("div",{staticClass:"input-error-txt",domProps:{innerHTML:e._s(e.errorTxt)}}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.privacyError,expression:"privacyError"}],staticClass:"input-error-txt j-quickregister-privacy-tip",domProps:{innerHTML:e._s(e.language.lang_privacy_error)}})],2)]),e._v(" "),t("div",{staticClass:"email-btn"},[t("button",{staticClass:"she-btn-purple-no-hover",style:e.insideNohover,on:{click:e.submitQuickReg}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.state.quickloading,expression:"!state.quickloading"}]},[e._v(e._s(e.firstCouponSite.registerImgConf&&e.firstCouponSite.registerImgConf.button_copy))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.state.quickloading,expression:"state.quickloading"}],staticClass:"la-ball-pulse la-ball-pulse-white"},[t("div"),e._v(" "),t("div"),e._v(" "),t("div")])])])])])])],2)])},o=[function(){var e=this.$createElement,i=this._self._c||e;return i("div",[i("label",{staticClass:"she-checkbox"},[i("input",{staticClass:"j-privacy-checkbox",attrs:{type:"checkbox",name:"privacy"}}),this._v(" "),i("i")])])}];t.d(i,"a",function(){return r}),t.d(i,"b",function(){return o})},aCs1:function(e,i,t){"use strict";var r=n(t("8IYF")),o=n(t("AYMa"));function n(e){return e&&e.__esModule?e:{default:e}}$("body").append('<div class="j-quick-register-container"></div>'),window.quickRegister=new Vue({components:{"quick-register-vue":r.default},template:'<quick-register-vue \n        :show-quick="state.quickRegister" \n        :quick-show="state.quickShow"\n        @show-openreg="quickInnerShow"\n        @show-innereg="quickInnerOpenshow"\n        >\n    </quick-register-vue>',el:".j-quick-register-container",data:{state:{quickRegister:!1,quickShow:!1}},methods:{rawHide:function(){this.state.quickRegister=!1,this.state.quickShow=!1,window._GB_PopUpModalEventCenter_.next()},quickInnerShow:function(){var e=this;window._GB_PopUpModalEventCenter_.pushQueue("quickRegister",function(){sa("send",{activity_name:"expose_quick_register"}),o.default.ga.autoPopUps(),e.state.quickShow=!0,e.state.quickRegister=!0})},quickInnerOpenshow:function(){this.state.quickShow=!this.state.quickShow,SHEIN_W.setCookie("have_show",1,86400);var e=SHEIN_W.getCookie("hide_q_r");null==$(".j-header-username").text()&&1!=e&&window.location.href.indexOf("user/auth/login")<0&&(this.state.quickRegister=!0),this.state.quickShow&&(o.default.ga.clickPopUps(),sa("send",{activity_name:"expose_quick_register"})),this.state.quickShow||window._GB_PopUpModalEventCenter_.next()},privacyShow:function(){welcomePrivacyVue.showContent="fromQuickRegister","undefined"!=typeof GB_GDPR_ANALYSIS&&GB_GDPR_ANALYSIS.GDPRregister("ClickPrivacyPolicy","快速注册")}}}),$(function(){var e=SHEIN_W.getCookie("hide_q_r");!SHEIN_W.getCookie("userinfo_email")&&1!=e&&window.location.href.indexOf("user/auth/login")<0&&(quickRegister.state.quickRegister=!0),$(".j-quick-register").length&&$("body").click(function(e){$(".j-welcome-privacy").length&&$.contains($(".j-welcome-privacy")[0],e.target)||$(".j-popup-us").length&&$.contains($(".j-popup-us")[0],e.target)||$(".j-us-privacy-pop").length&&$.contains($(".j-us-privacy-pop")[0],e.target)||$.contains($(".j-quick-register")[0],e.target)||(SHEIN_W.getCookie("have_show")||SHEIN_W.setCookie("have_show",1,86400),quickRegister.state.quickShow=!1,window._GB_PopUpModalEventCenter_.next())})})},dWkv:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=n(t("14Xm")),o=n(t("AYMa"));function n(e){return e&&e.__esModule?e:{default:e}}var s=gbCommonInfo,c=s.lang,a=s.SITE_GDPR;i.default={name:"quick-register-vue",props:{showQuick:!1,quickShow:!1},data:function(){return{language:{},lang:c,SITE_GDPR:a,firstCouponSite:{},emailtxt:"",errorTxt:"",state:{quickShowReg:!1,quickShowSuc:!1,errorTip:!1,quickloading:!1},first_pop_uped:"",isKeepPrivacy:!1,privacyError:!1,pattern:/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,6}|[0-9]{1,3})(\]?)$/,gb_s_qr_enable:!0,defoutStyle:{backgroundColor:""},changeoutStyle:{backgroundColor:""},insideNohover:{backgroundColor:"",borderColor:"",color:""}}},created:function(){this.init()},mounted:function(){this.first_pop_uped=SHEIN_W.getCookie("have_show"),1!=this.first_pop_uped?this.$emit("show-openreg"):window._GB_PopUpModalEventCenter_.done("quickRegister"),1==SHEIN_W.getCookie("keepPrivacy")?this.isKeepPrivacy=!1:(this.isKeepPrivacy=!0,["uk","fr","de","es","it","en","nl"].includes(c)&&$(".j-quick-register").find(".inside-btm").addClass("add-privacy")),$(".c-quick-register").on("click",".j-privacy-check-quickregister .she-checkbox",function(){$(".j-privacy-check-quickregister .j-privacy-checkbox").is(":checked")&&SHEIN_W.setCookie("keepPrivacy","1",31536e3)})},methods:{init:function(){var e=function(e){return function(){var i=e.apply(this,arguments);return new Promise(function(e,t){return function r(o,n){try{var s=i[o](n),c=s.value}catch(e){return void t(e)}if(!s.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(r.default.mark(function e(){var i,t,o,n,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:i=e.sent,t=i.language,o=i.firstCouponSite,this.language=t,this.firstCouponSite=o,o&&(this.defoutStyle={backgroundColor:o.registerImgConf&&o.registerImgConf.left_colour_on},this.changeoutStyle={backgroundColor:o.registerImgConf&&o.registerImgConf.left_colour_off},this.insideNohover={backgroundColor:o.registerImgConf&&o.registerImgConf.button_colour,borderColor:o.registerImgConf&&o.registerImgConf.button_colour,color:o.registerImgConf&&o.registerImgConf.button_copy_colour},n="",o.registerImgConf.register_img&&(n+="\n                    .c-quick-register .quickg-inside {\n                        background: url("+transformImg(o.registerImgConf.register_img)+") no-repeat!important;\n                    }\n                    "),o.registerImgConf.register_success_img&&(n+="\n                    .c-quick-register .quickg-inside.quickg-inside-suc {\n                        background: url("+transformImg(o.registerImgConf.register_success_img)+") no-repeat!important;\n                    }\n                    "),o.registerImgConf.input_copy_colour&&(n+="\n                    .c-quick-register .quickg-inside .inside-input .c-input input::-webkit-input-placeholder {\n                        color: "+o.registerImgConf.input_copy_colour+"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input:-moz-placeholder {\n                        color: "+o.registerImgConf.input_copy_colour+"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input::-moz-placeholder {\n                        color: "+o.registerImgConf.input_copy_colour+"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input:-ms-input-placeholder {\n                        color: "+o.registerImgConf.input_copy_colour+"!important;\n                    }\n                    .c-quick-register .quickg-inside .inside-input .c-input input {\n                    -webkit-text-fill-color: "+o.registerImgConf.input_copy_colour+"!important;\n                    }\n                    "),(s=document.createElement("style")).setAttribute("type","text/css"),s.innerHTML=n,document.body.appendChild(s));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),fetchData:function(){return new Promise(function(e,i){$.get("/getQuickRegisterData",function(i){e(i)})})},openQuickReg:function(){this.$emit("show-innereg")},showArgeeClause:function(){1==SHEIN_W.getCookie("keepPrivacy")&&$.post("/user/showAgreeClause",{},function(e){})},submitQuickReg:function(){var e=this,i=this.language;if(!e.gb_s_qr_enable)return!1;var t,r=e.emailtxt;if(e.errorTxt="",sa("send",{activity_name:"click_quick_register",activity_param:{activity_from:"quick"}}),t=$(".j-privacy-check-quickregister").length&&$(".j-privacy-check-quickregister").is(":visible")&&$(".j-privacy-check-quickregister .j-privacy-checkbox").is(":checked")?1:0,"us"==c){var n=SHEIN_W.getCookie("countryId");if(!(1==SHEIN_W.getCookie("keepPrivacy"))&&_gb_privacyEurCountry.indexOf(parseInt(n))>-1)return welcomePrivacyVue.showPop=!0,"undefined"!=typeof GB_GDPR_ANALYSIS&&GB_GDPR_ANALYSIS.GDPRregister("PopUps",""),e.biQuickRegisterResult(0,"failure","other"),!1}e.$nextTick(function(){if(0==r.length)return e.privacyError=!1,e.errorTxt=i.lang_header_getoff_error_p2,o.default.ga.register(0,"Please fill in the mailbox"),e.biQuickRegisterResult(t,"failure","empty_email"),!1;if(!e.pattern.test(r))return e.privacyError=!1,e.errorTxt=i.lang_login_enter_invalid,o.default.ga.register(0,"Mailbox validation failure"),e.biQuickRegisterResult(t,"failure","incorrect_email_format"),!1;if($(".j-privacy-check-quickregister").length&&$(".j-privacy-check-quickregister").is(":visible")&&!$(".j-privacy-check-quickregister .j-privacy-checkbox").is(":checked"))e.errorTxt="",e.privacyError=!0,o.default.ga.boolPrivacy(),e.biQuickRegisterResult(t,"failure","other");else{var n=[];if("undefined"!=typeof firstCouponSite&&firstCouponSite&&firstCouponSite.registerImgConf&&firstCouponSite.registerImgConf.is_show_perfer)$(".quick-reg-refer-input input:checkbox:checked").each(function(e,i){n.push(parseInt(i.name))});var s={email:r,prefer:n};e.gb_s_qr_enable=!1,e.state.quickloading=!0,$(".j-privacy-check-quickregister").length&&$(".j-privacy-check-quickregister").is(":visible")&&SHEIN_W.setCookie("keepPrivacy","1",31536e3),$.ajax({type:"POST",url:"/user/auth/quickRegister",contentType:"application/json",data:JSON.stringify(s),success:function(r){e.gb_s_qr_enable=!0,0==r.code?(e.showArgeeClause(),o.default.ga.register(1)):o.default.ga.register(0,r.msg),0==r.code?(e.state.quickShowReg=!0,e.state.quickShowSuc=!0,SHEIN_W.setCookie("needBindFirstCoupon",1),SHEIN_W.setCookie("have_show",1,86400),void 0!==SHEIN_W.userModule&&SHEIN_W.userModule.update_top_login&&SHEIN_W.userModule.update_top_login(),$(".j-privacy-check-quickregister").length&&$(".j-privacy-check-quickregister").is(":visible")&&"undefined"!=typeof GB_GDPR_ANALYSIS&&GB_GDPR_ANALYSIS.GDPRregister("Subscribe-register","AgreePrivacyPolicy"),e.biQuickRegisterResult(t,"success","")):400503==r.code?(e.privacyError=!1,e.errorTxt=i.lang_header_getoff_error_p4,e.biQuickRegisterResult(t,"failure","registered_email")):400517==r.code?(e.privacyError=!1,e.errorTxt=i.lang_ip_overflow,e.biQuickRegisterResult(t,"failure","IP_limit_error")):400522==r.code?(e.privacyError=!1,e.errorTxt=i.lang_cod_verify5,e.biQuickRegisterResult(t,"failure","other")):100102==r.code?(e.privacyError=!1,e.errorTxt=i.lang_login_enter_invalid,e.biQuickRegisterResult(t,"failure","Mailbox validation failure")):(e.privacyError=!1,e.errorTxt=i.lang_member_wallet_failed,e.biQuickRegisterResult(t,"failure","other")),e.state.quickloading=!1},error:function(){e.biQuickRegisterResult(t,"failure","network_error")}})}})},transformImg:transformImg,editInputEmail:function(){o.default.ga.editEmail()},blurTips:function(){this.emailtxt.length&&!this.pattern.test(this.emailtxt)?this.errorTxt=this.language.lang_login_enter_invalid:this.errorTxt=""},biQuickRegisterResult:function(e,i,t){sa("send",{activity_name:"click_quick_register_result",activity_param:{privacy_policy:e,status:i,failure_reason:t,activity_from:"quick"}},{beacon:1})}}}}}]);
//# sourceMappingURL=quick-register-module.effd97.js.map